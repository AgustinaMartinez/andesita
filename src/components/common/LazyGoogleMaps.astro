---
const url =
  "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2860.8080153396613!2d-71.66765662314457!3d-44.19042217108176!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xbdf42f005cea1091%3A0x41c23310c9c34f2d!2sCaba%C3%B1a%20Andesita!5e0!3m2!1ses-419!2sar!4v1749965716763!5m2!1ses-419!2sar";
---

<!-- <div class="lazy-map-container w-full h-full"></div> -->
<iframe
  src={url}
  width="100%"
  height="100%"
  allowfullscreen
  loading="lazy"
  referrerpolicy="no-referrer-when-downgrade"
  title="Ubicación de Cabaña Andesita"
  aria-label="Mapa de ubicación de Cabaña Andesita"></iframe>

<!-- TODO: Mejorar el script para hacer el componente lazy -->

<!-- <script type="module">
  const containers = document.querySelectorAll(".lazy-map-container");

  if (containers.length) {
    const url =
      "https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2860.8080153396613!2d-71.66765662314457!3d-44.19042217108176!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xbdf42f005cea1091%3A0x41c23310c9c34f2d!2sCaba%C3%B1a%20Andesita!5e0!3m2!1ses-419!2sar!4v1749965716763!5m2!1ses-419!2sar";

    const observer = new IntersectionObserver(
      (entries, obs) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const container = entry.target;
            const iframe = document.createElement("iframe");
            iframe.src = url;
            iframe.width = "100%";
            iframe.height = "100%";
            iframe.loading = "lazy";
            iframe.allowFullscreen = true;
            iframe.referrerPolicy = "no-referrer-when-downgrade";
            iframe.title = "Ubicación de Cabaña Andesita";
            iframe.setAttribute("aria-label", iframe.title);

            container.appendChild(iframe);
            obs.unobserve(container);
          }
        });
      },
      {
        threshold: 0.25,
        rootMargin: "0px 0px 200px 0px",
      }
    );

    containers.forEach((element) => observer.observe(element));
  }
</script> -->
